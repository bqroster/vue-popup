!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("bqroster-utils")):"function"==typeof define&&define.amd?define(["exports","bqroster-utils"],t):t((i=i||self).ModalContainer={},i.bqrosterUtils)}(this,(function(i,t){"use strict";var n={render:function(){var i,t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"bqr-click-outside",rawName:"v-bqr-click-outside",value:this.clickOutsideDirectiveFn,expression:"clickOutsideDirectiveFn"}],ref:"popupContainer",staticClass:"bqr__popup-container",class:(i={},i[this.animatableTranslateClass]=!0,i),style:{"z-index":this.zIndex}},[this._t("default")],2)},staticRenderFns:[],mixins:[{props:{animation:{type:[Boolean,Object],default:!1}},watch:{animation:function(i){!0===this.isMounted&&(this.isAnimatable?this.setIsAnimationReady():this.clearIsAnimationReady())}},data:function(){return{isMounted:!1,isAnimationReady:!1,animatableDefaultClass:"swipe-down",animationPrefixClass:"animation-",animationTypeClasses:["swipe-down","swipe-up","swipe-left","swipe-right"]}},computed:{isReadyToAnimate:function(){return this.isAnimatable&&!0===this.isAnimationReady},isReadyToAnimateBefore:function(){return this.isAnimatable&&!0!==this.isAnimationReady},isAnimatable:function(){return!0===this.animation||"object"==typeof this.animation},animatableTranslateClass:function(){return this.isReadyToAnimateBefore?this.animatableClassBySlug("before"):this.isReadyToAnimate?this.animatableClassRetriever():this.animatableClassBySlug("on-hold")}},methods:{setDefaultClass:function(i){this.animatableDefaultClass=i},setIsAnimationReady:function(){this.isAnimationReady=!0},clearIsAnimationReady:function(){this.isAnimationReady=!1},startAnimationIf:function(){this.isAnimatable&&this.setIsAnimationReady()},isAnimatableTypeDefault:function(){return!0===this.animation||"object"==typeof this.animation&&t.isEmpty(this.animation.type)},isAnimationTypeTranslatableClass:function(i){return this.animationTypeClasses.includes(i)},animatableClassRetriever:function(){if(this.isAnimatableTypeDefault())return this.animatableClassBySlug(this.animatableDefaultClass);if(this.isAnimationTypeTranslatableClass(this.animation.type))return this.animatableClassBySlug(this.animation.type);throw Error("[Animation]: Translate animation type "+this.animation.type+", does not exist")},animatableClassBySlug:function(i){return""+this.animationPrefixClass+i}},mounted:function(){this.startAnimationIf(),this.isMounted=!0}}],props:{refPopup:{required:!0},align:{type:String,default:"top-center"},isClickableOutside:{type:[Boolean,Function],default:!0},zIndex:{type:Number,default:999}},watch:{refPopup:function(i){i&&(this.processPopupBoundingClientPosition(),this.installListeners())}},data:function(){return{popupBoundingClient:{},refPopupBoundingClient:{}}},mounted:function(){this.refPopup&&(this.processPopupBoundingClientPosition(),this.installListeners())},methods:{emitClosePopup:function(i){this.$emit("close")},clickOutsideDirectiveFn:function(){return!1===this.isClickableOutside?function(){}:t.isFunction(this.isClickableOutside)?this.processCustomCloseablePopup:this.emitClosePopup},processCustomCloseablePopup:function(i){this.isClickableOutside(i)},processScrollOnPopup:function(){this.processPopupBoundingClientPosition()},processPopupBoundingClientPosition:function(){this.setRefPopupBoundingClient(),this.setPopupBoudingClient(),this.setPopupPosition()},setRefPopupBoundingClient:function(){this.refPopupBoundingClient=this.refPopup.getBoundingClientRect()},setPopupBoudingClient:function(){this.popupBoundingClient=this.$refs.popupContainer.getBoundingClientRect()},setPopupPosition:function(){this.$refs.popupContainer.style.left=this.getPopupLeftPosition(),this.$refs.popupContainer.style.top=this.getPopupTopPosition()},installListeners:function(){window.addEventListener("scroll",this.processScrollOnPopup),window.addEventListener("resize",this.processScrollOnPopup)},getPopupLeftPosition:function(){return this.getPopupLeftPositionOnAlignment()+"px"},getPopupTopPosition:function(){return this.getPopupTopPositionOnAlignment()+"px"},getPopupLeftPositionOnAlignment:function(){return this.align.includes("-left")?this.refPopupBoundingClient.left:this.align.includes("-right")?this.refPopupBoundingClient.left+this.refPopupBoundingClient.width-this.popupBoundingClient.width:this.refPopupBoundingClient.left+this.refPopupBoundingClient.width/2-this.popupBoundingClient.width/2},getPopupTopPositionOnAlignment:function(){return this.align.includes("bottom-")?this.refPopupBoundingClient.top-this.popupBoundingClient.height:this.refPopupBoundingClient.top+this.refPopupBoundingClient.height},removeListeners:function(){window.removeEventListener("scroll",this.processScrollOnPopup),window.removeEventListener("resize",this.processScrollOnPopup)}},beforeDestroy:function(){this.removeListeners()}},e={bind:function(i,t,n){i.clickOutsideEvent=function(e){i===e.target||i.contains(e.target)||n.context[t.expression]()(e)},document.body.addEventListener("click",i.clickOutsideEvent)},unbind:function(i){document.body.removeEventListener("click",i.clickOutsideEvent)}};function s(i){s.installed||(s.installed=!0,i.component("bqr-popup",n),i.directive("bqr-click-outside",e))}var o={install:s},a=null;"undefined"!=typeof window?a=window.Vue:"undefined"!=typeof global&&(a=global.vue),a&&a.use(o),n.install=s,i.default=n,Object.defineProperty(i,"__esModule",{value:!0})}));
